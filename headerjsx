import React, { useState, useEffect } from "react";
import { useNavigate, useLocation } from "react-router-dom";
import logo from "../../assets/sc-logo.png";

export default function Header({ currentUser }) {
  const navigate = useNavigate();
  const location = useLocation();
  const [theme, setTheme] = useState("light");

  useEffect(() => {
    document.body.setAttribute("data-theme", theme);
  }, [theme]);

  const handleLogout = () => {
    localStorage.clear();
    navigate("/");
  };

  return (
    <header className="scb-header d-flex justify-content-between align-items-center p-3">
      <div className="d-flex align-items-center">
        <img src={logo} alt="SCB" className="header-logo" />
        <h5 className="ms-2 mb-0 text-white">Payment Initiations</h5>
        <span className="ms-3 text-light fw-semibold">
          {location.pathname.replace("/", "").toUpperCase() || "Dashboard"}
        </span>
      </div>
      <div className="d-flex align-items-center gap-3">
        <span className="text-light">👤 {currentUser}</span>
        <button className="btn btn-sm btn-outline-light" onClick={() => setTheme(theme === "light" ? "dark" : "light")}>
          {theme === "light" ? "🌙" : "☀️"}
        </button>
        <button className="btn btn-sm btn-danger" onClick={handleLogout}>Logout</button>
      </div>
    </header>
  );
}
